# mod

æ¨¡å— è®©æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ª crate ä¸­çš„ä»£ç è¿›è¡Œåˆ†ç»„ï¼Œä»¥æé«˜å¯è¯»æ€§ä¸é‡ç”¨æ€§ã€‚æ¨¡å—è¿˜å¯ä»¥æ§åˆ¶é¡¹çš„ ç§æœ‰æ€§ï¼Œå³é¡¹æ˜¯å¯ä»¥è¢«å¤–éƒ¨ä»£ç ä½¿ç”¨çš„ï¼ˆpublicï¼‰ï¼Œè¿˜æ˜¯ä½œä¸ºä¸€ä¸ªå†…éƒ¨å®ç°çš„å†…å®¹ï¼Œä¸èƒ½è¢«å¤–éƒ¨ä»£ç ä½¿ç”¨ï¼ˆprivateï¼‰ã€‚

# æ¨¡å—å®šä¹‰

æ¨¡å—é€šè¿‡å…³é”®å­— mod åŠ æ¨¡å—å®šä¹‰, ä¾‹å¦‚:

```rs
mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}

        fn seat_at_table() {}
    }

    mod serving {
        fn take_order() {}

        fn serve_order() {}

        fn take_payment() {}
    }
}
```

æ–‡ä»¶ src/main.rs å’Œ src/lib.rs, å¯¹åº”çš„æ¨¡å—æ˜¯ crate, ç®±(crate)çš„æ¨¡å—ç»“æ„(module structure), ä¹Ÿå«åšæ¨¡å—æ ‘(module tree):

```rs
crate
 â””â”€â”€ front_of_house
     â”œâ”€â”€ hosting
     â”‚   â”œâ”€â”€ add_to_waitlist
     â”‚   â””â”€â”€ seat_at_table
     â””â”€â”€ serving
         â”œâ”€â”€ take_order
         â”œâ”€â”€ serve_order
         â””â”€â”€ take_payment
```

æ¨¡å— crate é»˜è®¤å­˜åœ¨, ä¸éœ€è¦é€šè¿‡å…³é”®å­— mod æ–¹å¼æ¥å®šä¹‰ã€‚ä¸æ–‡ä»¶ç³»ç»Ÿç±»ä¼¼, æ–‡ä»¶ç³»ç»Ÿçš„æ ¹èŠ‚ç‚¹æ˜¯ /, ç®±(crate)çš„æ ¹èŠ‚ç‚¹æ˜¯ `crate`.

- ç»å¯¹è·¯å¾„ï¼Œä»ç®±(crate)çš„æ ¹èŠ‚ç‚¹å¼€å§‹, ç®±(crate)çš„åç§°, æˆ– `crate`
- ç›¸å¯¹è·¯å¾„ï¼Œä»å½“å‰æ¨¡å—å¼€å§‹, å¯ä»¥ä½¿ç”¨ `self`, `super`

```rust
// æ–‡ä»¶å†…ç»å¯¹è·¯å¾„ Absolute path
crate::front_of_house::hosting::add_to_waitlist();

// ç›¸å¯¹è·¯å¾„ Relative path
front_of_house::hosting::add_to_waitlist();
```

# åŒæ–‡ä»¶æ¨¡å—

ç›¸å…³ä»£ç å’Œæ•°æ®è¢«åˆ†ç»„åˆ°ä¸€ä¸ªæ¨¡å—ä¸­å¹¶å­˜å‚¨åœ¨åŒä¸€æ–‡ä»¶ä¸­ã€‚

```rs
fn main() {
   greetings::hello();
}

mod greetings {
  // â­ï¸ By default, everything inside a module is private
  pub fn hello() { // â­ï¸ So function has to be public to access from outside
    println!("Hello, world!");
  }
}
```

æ¨¡å—ä¹Ÿå¯ä»¥åµŒå¥—ã€‚

```rs
fn main() {
  phrases::greetings::hello();
}

mod phrases {
  pub mod greetings {
    pub fn hello() {
      println!("Hello, world!");
    }
  }
}
```

self å…³é”®å­—ç”¨äºå¼•ç”¨ç›¸åŒçš„æ¨¡å—ï¼Œè€Œ super å…³é”®å­—ç”¨äºå¼•ç”¨çˆ¶æ¨¡å—ã€‚è¿˜å¯ä»¥ä½¿ç”¨ super å…³é”®å­—ä»æ¨¡å—å†…éƒ¨è®¿é—®æ ¹å‡½æ•°ã€‚

```rs
fn main() {
  greetings::hello();
}

fn hello() {
  println!("Hello, world!");
}

mod greetings {
  pub fn hello() {
    super::hello();
  }
}
```

ç¼–å†™æµ‹è¯•æ—¶ï¼Œæœ€å¥½åœ¨æµ‹è¯•æ¨¡å—ä¸­ç¼–å†™æµ‹è¯•ï¼Œå› ä¸ºå®ƒä»¬ä»…åœ¨è¿è¡Œæµ‹è¯•æ—¶æ‰ç¼–è¯‘ã€‚

```rs
fn greet() -> String {
    "Hello, world!".to_string()
}

#[cfg(test)] // only compiles when running tests
mod tests {
    use super::greet; // import root greet function

    #[test]
    fn test_greet() {
        assert_eq!("Hello, world!", greet());
    }
}
```

# æ¨¡å—å¯è§æ€§

- æ‰€æœ‰å…ƒç´ , å‡½æ•° functions, æ–¹æ³• methods, ç»“æ„ä½“ structs, æšä¸¾ enum, æ¨¡å— modules, å¸¸é‡ constants, é»˜è®¤æ˜¯ç§æœ‰çš„, å¯¹å¤–å…¬å¼€(public), éœ€è¦é€šè¿‡å…³é”®å­—`pub`å£°æ˜
  - å³ä¾¿æ˜¯å…±æœ‰çš„ç»“æ„ä½“(public structs), å†…éƒ¨çš„å…ƒç´ (fields)å’Œæ–¹æ³•(methods)ä»æ˜¯ç§æœ‰çš„(private)
  - å…±æœ‰çš„æšä¸¾(public enums), å…¶æ‰€æœ‰å˜å¤©(variants)ä¹ŸåŒä¸ºå…±æœ‰(public)
- çˆ¶æ¨¡å—ä¸­çš„å…ƒç´ , ä¸èƒ½ä½¿ç”¨å­æ¨¡å—ä¸­çš„ç§æœ‰å…ƒç´ 
- å­æ¨¡å—ä¸­çš„å…ƒç´ , å¯ä»¥ä½¿ç”¨çˆ¶æ¨¡å—çš„å…ƒç´ 

è­¬å¦‚å°†åˆ¶ä½œä¸€ä¸ªåä¸º print_things çš„ modï¼Œå®ƒå…·æœ‰ä¸€äº›ä¸æ‰“å°ç›¸å…³çš„åŠŸèƒ½ã€‚

```rs
mod print_things {
    use std::fmt::Display;

    fn prints_one_thing<T: Display>(input: T) { // Print anything that implements Display
        println!("{}", input)
    }
}

fn main() {}
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ print_things é‡Œé¢å†™äº†`std::fmt::Display;`ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„ç©ºé—´ã€‚å¦‚æœæ‚¨åœ¨ main()ä¸­ä½¿ç”¨`std::fmt::Display;`ç¼–å†™ï¼Œå°†æ— æµäºäº‹ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ç°åœ¨ä¸èƒ½ä»`main()`è°ƒç”¨å®ƒã€‚å¦‚æœåœ¨ fn å‰é¢æ²¡æœ‰ pub å…³é”®å­—ï¼Œå®ƒå°†ä¿æŒç§æœ‰çŠ¶æ€ã€‚è®©æˆ‘ä»¬å°è¯•åœ¨æ²¡æœ‰å‘å¸ƒçš„æƒ…å†µä¸‹è°ƒç”¨å®ƒã€‚è¿™æ˜¯ä¸€ç§ç¼–å†™æ–¹å¼ï¼š

```rs
// ğŸš§
fn main() {
    crate::print_things::prints_one_thing(6);
}
```

`crate` æ„å‘³ç€åœ¨è¯¥æ–‡ä»¶ä¸­ã€‚é‡Œé¢æ˜¯ mod print_thingsï¼Œæœ€åæ˜¯ prints_one_thing() å‡½æ•°ã€‚æ‚¨å¯ä»¥æ¯æ¬¡ç¼–å†™è¯¥ä»£ç ï¼Œä¹Ÿå¯ä»¥ç¼–å†™ç”¨äºå¯¼å…¥çš„ç”¨æ³•ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é”™è¯¯æç¤ºå®ƒæ˜¯ç§æœ‰çš„ï¼š

```rs
// âš ï¸
mod print_things {
    use std::fmt::Display;

    fn prints_one_thing<T: Display>(input: T) {
        println!("{}", input)
    }
}

fn main() {
    use crate::print_things::prints_one_thing;

    prints_one_thing(6);
    prints_one_thing("Trying to print a string...".to_string());
}

error[E0603]: function `prints_one_thing` is private
  --> src\main.rs:10:30
   |
10 |     use crate::print_things::prints_one_thing;
   |                              ^^^^^^^^^^^^^^^^ private function
   |
note: the function `prints_one_thing` is defined here
  --> src\main.rs:4:5
   |
4  |     fn prints_one_thing<T: Display>(input: T) {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
```

å¾ˆå®¹æ˜“ç†è§£å‡½æ•° print_one_thing æ˜¯ç§æœ‰çš„ã€‚å®ƒè¿˜æ˜¾ç¤ºäº†åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°è¯¥å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºä¸€æ—¦å¼€å§‹ä½¿ç”¨ modï¼Œæ‚¨å¯èƒ½è¿˜ä¼šä½¿ç”¨å¤šä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å¾ˆéš¾æ‰¾åˆ°å†…å®¹ã€‚ç°åœ¨æˆ‘ä»¬åªå†™ pub fn è€Œä¸æ˜¯ fnï¼Œä¸€åˆ‡æ­£å¸¸ã€‚

```rs
mod print_things {
    use std::fmt::Display;

    pub fn prints_one_thing<T: Display>(input: T) {
        println!("{}", input)
    }
}

fn main() {
    use crate::print_things::prints_one_thing;

    prints_one_thing(6);
    prints_one_thing("Trying to print a string...".to_string());
}

6
Trying to print a string...
```
